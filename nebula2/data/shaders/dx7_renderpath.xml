<?xml version="1.0" encoding="utf-8" ?> 
<RenderPath name="dx7" shaderpath="home:data/shaders/fixed">
    
    <!-- declare variables -->
    <Float4 name="ShadowColor" value="0.0 0.0 0.0 0.5" />

    <!-- render into offscreen buffer -->
    <Pass name="color" shader="shaders:passes.fx" technique="tPassColor" clearColor="0.5 0.5 0.5 1.0" clearDepth="1.0" clearStencil="0">
        <Phase name="opaque_nolight_nofog" shader="shaders:phases.fx" technique="tPhaseOpaqueNoLightNoFog" fourcc="colr" sort="FrontToBack" lights="On">
            <Sequence shader="shaders:default_nolight_nofog.fx" />
            <Sequence shader="shaders:sky.fx" />
        </Phase>
        <Phase name="opaque" shader="shaders:phases.fx" technique="tPhaseOpaque" fourcc="colr" sort="FrontToBack" lights="On">
            <Sequence shader="shaders:cubeskybox.fx" />
            <Sequence shader="shaders:terrain.fx" />
            <Sequence shader="shaders:default.fx" />
            <Sequence shader="shaders:default_environment.fx" />
            <Sequence shader="shaders:default_lightmapped.fx" />
            <Sequence shader="shaders:ocean.fx" />
        </Phase>
        <Phase name="multipass" shader="shaders:phases.fx" technique="tPhaseMultiPass" fourcc="colr" sort="FrontToBack" lights="On">
            <Sequence shader="shaders:default_layered.fx" />
        </Phase>
        <Phase name="vsopaque" shader="shaders:phases.fx" technique="tPhaseVsOpaque" fourcc="colr" sort="FrontToBack" lights="On">
            <Sequence shader="shaders:default_blended.fx" />
            <Sequence shader="shaders:default_skinned.fx" />
            <Sequence shader="shaders:leaf.fx" />
            <Sequence shader="shaders:tree.fx" />        
        </Phase>
        <Phase name="alpha" shader="shaders:phases.fx" technique="tPhaseAlpha" fourcc="colr" sort="BackToFront" lights="On">
            <Sequence shader="shaders:default_alpha.fx" />
            <Sequence shader="shaders:default_alpha2.fx" />
             <Sequence shader="shaders:default_environment_alpha.fx" />
            <Sequence shader="shaders:terraingrass.fx" />
        </Phase>
        <Phase name="vsalpha" shader="shaders:phases.fx" technique="tPhaseVsAlpha" fourcc="colr" sort="BackToFront" lights="On">
            <Sequence shader="shaders:particle.fx" />        
        </Phase>
    </Pass>
    
    <!-- draw stencil shadows -->
    <Pass name="shadow" drawShadowVolumes="Yes"/>
    <Pass name="shadowPlane" shader="shaders:stencil_plane.fx" drawQuad="Yes" shadowEnabledCondition="Yes">
        <Float4 name="MatDiffuse" variable="ShadowColor" />
    </Pass>
    
    <!-- post-draw stuff -->
    <Pass name="gui" drawGui="Yes"/>

    <!-- fini -->
</RenderPath>
